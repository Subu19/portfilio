{"mappings":"AAAC,CAAA,SAAU,CAAC;IACV,EAAE,GAAG,cAAc,SAAU,OAAO;QAClC,IAAI,YAAY,UACd,OAAO,mBAAmB,QAAQ,IAAI;aACjC,IAAI,YAAY,UACrB,OAAO,mBAAmB,SAAS,IAAI;aAClC;YACL,UAAU,EAAE,OACV,MACA;gBACE,eAAe,CAAC;gBAChB,OAAO;gBACP,KAAK,CAAC;gBACN,MAAM,IAAI;gBACV,KAAK;gBACL,IAAI,IAAI;gBACR,QAAQ;YACV,GACA;YAEF,QAAQ;YACR,OAAO,IAAI;QACb;IACF;IAEA,EAAE,MAAM,QAAQ,cAAc;QAC5B,UAAU,SAAU,UAAU;YAC5B,mBAAmB,SAAS,EAAE,IAAI;QACpC;IACF;IAEA,IAAI,UAAU,SAAU,OAAO;QAC7B,IAAI,gBAAgB,QAAQ;QAC5B,IAAI,MAAM,QAAQ;QAClB,IAAI,OAAO,EAAE,QAAQ;QACrB,IAAI,OAAO,EAAE,QAAQ;QACrB,IAAI,SAAS,EAAE,QAAQ;QACvB,OAAO,QAAQ;QACf,OAAO,QAAQ;QACf,OAAO,QAAQ;QACf,OAAO,QAAQ;QACf,OAAO,QAAQ;QACf,OAAO,KAAK;YACV,IAAI,YAAY,IAAI;YACpB,IAAI,OAAO,IAAI;YACf,KAAK,KAAK;gBACR,IAAI,OAAO,IAAI;gBACf,KAAK,KAAK,IAAI;gBACd,KAAK,IAAI,MAAM,KAAK;oBAClB,iBACE,WACA;wBAAC;wBAAM,IAAI;qBAAC,EACZ,KACA,eACA;gBAEJ;YACF;QACF;IACF;IAEA,IAAI,mBAAmB,SACrB,SAAS,EACT,KAAK,EACL,GAAG,EACH,aAAa,EACb,OAAO;QAEP,IAAI,MAAM,EAAE,OAAO;YAAE,UAAU;QAAW,GAAG,QAAQ;QACrD,IAAI,aAAa,EAAE,MAAM,MAAM,MAAM,SAAS,IAAI;QAClD,WAAW,SAAS;QAEpB,IAAI,WAAW,AAAC,CAAA,WAAW,eAAe,WAAW,YAAW,IAAK;QACrE,IAAI,WAAW,AAAC,CAAA,WAAW,gBAAgB,WAAW,aAAY,IAAK;QAEvE,IAAI,YAAY,KAAK,YAAY,GAC/B,WAAW,WAAW;QAGxB,IAAI,OAAO;YACT,eAAe;YACf,UAAU;YACV,UAAU;YACV,WAAW,EAAE,KAAK,CAAC,EAAE;YACrB,SAAS,EAAE,KAAK,CAAC,EAAE;YACnB,WAAW;YACX,KAAK;QACP;QAEA,IAAI,WAAW,WAAW,IAAI,qBAC5B,KAAK,IAAI,cAAc;QAEzB,EAAE,KAAK,WAAW,IAAI,IAAI,cAAc;QACxC,EAAE,KAAK,WAAW,IAAI,IAAI,eAAe;YAAC,WAAW,IAAI;SAAG;QAC5D,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK;YAC1B,IAAI,cAAc,WAAW,IAAI,EAAE,KAAK,KAAK,CAAC,EAAE,EAAE,gBAAgB;YAClE,EAAE,KAAK,KAAK,CAAC,EAAE,EAAE,eAAe;YAChC,IAAI,YAAY,UAAU,GACxB,EAAE,KAAK,CAAC,EAAE,EAAE,GAAG,2BAA2B;QAE9C;QACA,OAAO,WAAW,IAAI;IACxB;IAEA,IAAI,UAAU,SAAU,UAAU;QAChC,IAAI,QAAQ,EAAE,KAAK,YAAY,cAAc;QAC7C,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK;YAC1B,IAAI,cAAc,EAAE,EAAE,KAAK,KAAK,CAAC,EAAE,EAAE,gBAClC,IAAI,YACJ;YACH,EAAE,KAAK,KAAK,CAAC,EAAE,EAAE,eAAe;QAClC;QACA,EAAE,YAAY;IAChB;IAEA,IAAI,WAAW,SAAU,IAAI;QAC3B,KAAK,YAAY,KAAK,SAAS,CAAC,EAAE,CAAC;QACnC,KAAK,UAAU,KAAK,SAAS,CAAC,EAAE,CAAC;QACjC,IAAI,SAAS,KAAK;QAClB,KAAK,QAAQ;YACX,KAAK,UAAU;YACf,KAAK,UAAU;YACf,KAAK,UAAU;YACf,KAAK,UAAU;YACf,KAAK,QAAQ;YACb,KAAK,QAAQ;YACb,KAAK,QAAQ;YACb,KAAK,QAAQ;SACd;QACD,KAAK,SACH,MAAO,CAAA,KAAK,KAAK,CAAC,EAAE,GAAG,KAAK,KAAK,CAAC,EAAE,GAAG,KAAK,KAAK,CAAC,EAAE,GAAG,KAAK,KAAK,CAAC,EAAE,AAAD,KACnE,MAAO,CAAA,KAAK,KAAK,CAAC,EAAE,GAAG,KAAK,KAAK,CAAC,EAAE,GAAG,KAAK,KAAK,CAAC,EAAE,GAAG,KAAK,KAAK,CAAC,EAAE,AAAD;QACrE,KAAK,aAAa;QAClB,IAAI,WAAW,WACb,OAAQ,KAAK,aAAa;QAE5B,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK;YAC1B,IAAI,MAAM,CAAC,EAAE,KAAK,KAAK,KAAK,CAAC,EAAE,EAC7B,OAAQ,KAAK,aAAa;QAE9B;IACF;IAEA,IAAI,SAAS,SAAU,UAAU;QAC/B,IAAI,OAAO,EAAE,KAAK,YAAY;QAC9B,SAAS;QACT,IAAI,KAAK,YACP;QAEF,IAAI,WAAW,KAAK;QACpB,IAAI,WAAW,KAAK;QACpB,IAAI,OAAO,KAAK;QAChB,IAAI,KAAK,KAAK;QACd,IAAI,IAAI,AAAC,CAAA,KAAK,SAAS,KAAK,GAAE,IAAK;QACnC,IAAI,IAAI,AAAC,CAAA,GAAG,OAAO,GAAG,KAAI,IAAK;QAC/B,IAAI,IAAI,AAAC,CAAA,GAAG,SAAS,GAAG,GAAE,IAAK;QAC/B,IAAI,IAAI,AAAC,CAAA,KAAK,OAAO,KAAK,KAAI,IAAK;QAEnC,IAAI,IAAI;YAAC;YAAS;SAAO;QACzB,IAAI,IAAI,GAAG;YACT,IAAI;gBAAC;gBAAQ;aAAQ;YACrB,IAAI,IAAI,KAAK,IAAI,IAAI,WAAW,GAAG,KAAK,IAAI,KAAK,OAAO,GAAG;YAC3D,IAAI,IAAI,WAAW;YACnB,IAAI;QACN,OAAO;YACL,KAAK,WAAW;YAChB,IAAI,KAAK,IAAI,IAAI,WAAW,GAAG,KAAK,IAAI,KAAK,MAAM,GAAG;QACxD;QACA,IAAI,IAAI;YAAC;YAAU;SAAM;QACzB,IAAI,IAAI,GAAG;YACT,IAAI;gBAAC;gBAAO;aAAS;YACrB,IAAI,IAAI,KAAK,IAAI,IAAI,WAAW,GAAG,KAAK,IAAI,KAAK,QAAQ,GAAG;YAC5D,IAAI,IAAI,WAAW;YACnB,IAAI;QACN,OAAO;YACL,IAAI,KAAK,IAAI,GAAG,KAAK,IAAI,KAAK,KAAK,GAAG;YACtC,KAAK,WAAW;QAClB;QACA,IAAI,QAAQ,IAAI;QAChB,IAAI,SAAS,IAAI;QACjB,IAAI,QAAQ,UAAU;YACpB,IAAI,KAAK,IAAI,GAAG,KAAK,IAAI,KAAK,QAAQ,GAAG;YACzC,IAAI,KAAK,IAAI,GAAG,KAAK,IAAI,KAAK,KAAK,GAAG;YACtC,IAAI,KAAK,IAAI,KAAK,MAAM,GAAG;YAC3B,IAAI,KAAK,IAAI,KAAK,OAAO,GAAG;YAC5B,IAAI,IAAI,AAAC,CAAA,IAAI,IAAI,QAAO,IAAK;QAC/B;QACA,IAAI,SAAS,UAAU;YACrB,IAAI,KAAK,IAAI,GAAG,KAAK,IAAI,KAAK,OAAO,GAAG;YACxC,IAAI,KAAK,IAAI,GAAG,KAAK,IAAI,KAAK,MAAM,GAAG;YACvC,IAAI,KAAK,IAAI,KAAK,KAAK,GAAG;YAC1B,IAAI,KAAK,IAAI,KAAK,QAAQ,GAAG;YAC7B,IAAI,IAAI,AAAC,CAAA,IAAI,IAAI,QAAO,IAAK;QAC/B;QACA,QAAQ,IAAI;QACZ,SAAS,IAAI;QACb,SAAS,KAAM,CAAA,WAAW,CAAA;QAC1B,UAAU,KAAM,CAAA,WAAW,CAAA;QAC3B,IAAI,QACF,YACA,CAAC,CAAC,EAAE,GACJ,MACA,CAAC,CAAC,EAAE,GACJ,gBACA,YACA,CAAC,CAAC,EAAE,GACJ,MACA,CAAC,CAAC,EAAE,GACJ,gBACA,YACA,CAAC,CAAC,EAAE,GACJ,MACA,CAAC,CAAC,EAAE,GACJ;QACD,CAAA,YAAY,KAAK,YAAY,CAAA,KAC3B,CAAA,SAAS,YAAY,CAAC,CAAC,EAAE,GAAG,MAAM,CAAC,CAAC,EAAE,GAAG,aAAY;QACxD,IAAI,KAAK,QACP,SAAS;aACJ;YACL,KAAK,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,GAAG,SAAS,GAAG;YACxC,KAAK,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,GAAG,SAAS,GAAG;YACxC,KAAK,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,GAAG,SAAS,GAAG;YACxC,KAAK,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,GAAG,SAAS,GAAG;YACxC,IAAI,eAAe,WAAW;YAC9B,KAAK,IAAI,OAAO,WAAW,aAAa,IAAI,aAAa;YACzD,KAAK,IAAI,MAAM,WAAW,YAAY,IAAI,aAAa;YACvD,KAAK,IAAI,QAAQ,QAAQ;YACzB,KAAK,IAAI,SAAS,SAAS;QAC7B;QACA,IAAI,KAAK,KAAK;QACd,EAAE,YACC,YAAY,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EACpB,YAAY,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EACpB,SAAS,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EACjB,SAAS,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EACjB,KAAK,SAAS,OACd,IAAI,KAAK;IACd;IAEA,IAAI,qBAAqB,SAAU,MAAM,EAAE,QAAQ;QACjD,OAAO,SAAS,KAAK;YACnB,IAAI,cAAc,EAAE,KAAK,IAAI,EAAE;YAC/B,IAAI,uBAAuB,OACzB,IAAK,IAAI,IAAI,GAAG,MAAM,YAAY,QAAQ,IAAI,KAAK,IACjD,OAAO,WAAW,CAAC,EAAE;QAG3B;IACF;AACF,CAAA,EAAG","sources":["src/js/connection.js"],"sourcesContent":["(function ($) {\r\n  $.fn.connections = function (options) {\r\n    if (options === \"update\") {\r\n      return processConnections(update, this);\r\n    } else if (options === \"remove\") {\r\n      return processConnections(destroy, this);\r\n    } else {\r\n      options = $.extend(\r\n        true,\r\n        {\r\n          borderClasses: {},\r\n          class: \"connection\",\r\n          css: {},\r\n          from: this,\r\n          tag: \"connection\",\r\n          to: this,\r\n          within: \":root\",\r\n        },\r\n        options\r\n      );\r\n      connect(options);\r\n      return this;\r\n    }\r\n  };\r\n\r\n  $.event.special.connections = {\r\n    teardown: function (namespaces) {\r\n      processConnections(destroy, $(this));\r\n    },\r\n  };\r\n\r\n  var connect = function (options) {\r\n    var borderClasses = options.borderClasses;\r\n    var tag = options.tag;\r\n    var end1 = $(options.from);\r\n    var end2 = $(options.to);\r\n    var within = $(options.within);\r\n    delete options.borderClasses;\r\n    delete options.tag;\r\n    delete options.from;\r\n    delete options.to;\r\n    delete options.within;\r\n    within.each(function () {\r\n      var container = this;\r\n      var done = new Array();\r\n      end1.each(function () {\r\n        var node = this;\r\n        done.push(this);\r\n        end2.not(done).each(function () {\r\n          createConnection(\r\n            container,\r\n            [node, this],\r\n            tag,\r\n            borderClasses,\r\n            options\r\n          );\r\n        });\r\n      });\r\n    });\r\n  };\r\n\r\n  var createConnection = function (\r\n    container,\r\n    nodes,\r\n    tag,\r\n    borderClasses,\r\n    options\r\n  ) {\r\n    var css = $.extend({ position: \"absolute\" }, options.css);\r\n    var connection = $(\"<\" + tag + \"/>\", options).css(css);\r\n    connection.appendTo(container);\r\n\r\n    var border_w = (connection.outerWidth() - connection.innerWidth()) / 2;\r\n    var border_h = (connection.outerHeight() - connection.innerHeight()) / 2;\r\n\r\n    if (border_w <= 0 && border_h <= 0) {\r\n      border_w = border_h = 1;\r\n    }\r\n\r\n    var data = {\r\n      borderClasses: borderClasses,\r\n      border_h: border_h,\r\n      border_w: border_w,\r\n      node_from: $(nodes[0]),\r\n      node_to: $(nodes[1]),\r\n      nodes_dom: nodes,\r\n      css: css,\r\n    };\r\n\r\n    if (\"none\" === connection.css(\"border-top-style\")) {\r\n      data.css.borderStyle = \"solid\";\r\n    }\r\n    $.data(connection.get(0), \"connection\", data);\r\n    $.data(connection.get(0), \"connections\", [connection.get(0)]);\r\n    for (var i = 0; i < 2; i++) {\r\n      var connections = connection.add($.data(nodes[i], \"connections\")).get();\r\n      $.data(nodes[i], \"connections\", connections);\r\n      if (connections.length == 1) {\r\n        $(nodes[i]).on(\"connections.connections\", false);\r\n      }\r\n    }\r\n    update(connection.get(0));\r\n  };\r\n\r\n  var destroy = function (connection) {\r\n    var nodes = $.data(connection, \"connection\").nodes_dom;\r\n    for (var i = 0; i < 2; i++) {\r\n      var connections = $($.data(nodes[i], \"connections\"))\r\n        .not(connection)\r\n        .get();\r\n      $.data(nodes[i], \"connections\", connections);\r\n    }\r\n    $(connection).remove();\r\n  };\r\n\r\n  var getState = function (data) {\r\n    data.rect_from = data.nodes_dom[0].getBoundingClientRect();\r\n    data.rect_to = data.nodes_dom[1].getBoundingClientRect();\r\n    var cached = data.cache;\r\n    data.cache = [\r\n      data.rect_from.top,\r\n      data.rect_from.right,\r\n      data.rect_from.bottom,\r\n      data.rect_from.left,\r\n      data.rect_to.top,\r\n      data.rect_to.right,\r\n      data.rect_to.bottom,\r\n      data.rect_to.left,\r\n    ];\r\n    data.hidden =\r\n      0 === (data.cache[0] | data.cache[1] | data.cache[2] | data.cache[3]) ||\r\n      0 === (data.cache[4] | data.cache[5] | data.cache[6] | data.cache[7]);\r\n    data.unmodified = true;\r\n    if (cached === undefined) {\r\n      return (data.unmodified = false);\r\n    }\r\n    for (var i = 0; i < 8; i++) {\r\n      if (cached[i] !== data.cache[i]) {\r\n        return (data.unmodified = false);\r\n      }\r\n    }\r\n  };\r\n\r\n  var update = function (connection) {\r\n    var data = $.data(connection, \"connection\");\r\n    getState(data);\r\n    if (data.unmodified) {\r\n      return;\r\n    }\r\n    var border_h = data.border_h;\r\n    var border_w = data.border_w;\r\n    var from = data.rect_from;\r\n    var to = data.rect_to;\r\n    var b = (from.bottom + from.top) / 2;\r\n    var r = (to.left + to.right) / 2;\r\n    var t = (to.bottom + to.top) / 2;\r\n    var l = (from.left + from.right) / 2;\r\n\r\n    var h = [\"right\", \"left\"];\r\n    if (l > r) {\r\n      h = [\"left\", \"right\"];\r\n      var x = Math.max(r - border_w / 2, Math.min(from.right, to.right));\r\n      r = l + border_w / 2;\r\n      l = x;\r\n    } else {\r\n      l -= border_w / 2;\r\n      r = Math.min(r + border_w / 2, Math.max(from.left, to.left));\r\n    }\r\n    var v = [\"bottom\", \"top\"];\r\n    if (t > b) {\r\n      v = [\"top\", \"bottom\"];\r\n      var x = Math.max(b - border_h / 2, Math.min(from.bottom, to.bottom));\r\n      b = t + border_h / 2;\r\n      t = x;\r\n    } else {\r\n      b = Math.min(b, Math.max(from.top, to.top));\r\n      t -= border_h / 2;\r\n    }\r\n    var width = r - l;\r\n    var height = b - t;\r\n    if (width < border_w) {\r\n      t = Math.max(t, Math.min(from.bottom, to.bottom));\r\n      b = Math.min(b, Math.max(from.top, to.top));\r\n      l = Math.max(from.left, to.left);\r\n      r = Math.min(from.right, to.right);\r\n      r = l = (l + r - border_w) / 2;\r\n    }\r\n    if (height < border_h) {\r\n      l = Math.max(l, Math.min(from.right, to.right));\r\n      r = Math.min(r, Math.max(from.left, to.left));\r\n      t = Math.max(from.top, to.top);\r\n      b = Math.min(from.bottom, to.bottom);\r\n      b = t = (t + b - border_h) / 2;\r\n    }\r\n    width = r - l;\r\n    height = b - t;\r\n    width <= 0 && (border_h = 0);\r\n    height <= 0 && (border_w = 0);\r\n    var style =\r\n      \"border-\" +\r\n      v[0] +\r\n      \"-\" +\r\n      h[0] +\r\n      \"-radius: 0;\" +\r\n      \"border-\" +\r\n      v[0] +\r\n      \"-\" +\r\n      h[1] +\r\n      \"-radius: 0;\" +\r\n      \"border-\" +\r\n      v[1] +\r\n      \"-\" +\r\n      h[0] +\r\n      \"-radius: 0;\";\r\n    (border_h <= 0 || border_w <= 0) &&\r\n      (style += \"border-\" + v[1] + \"-\" + h[1] + \"-radius: 0;\");\r\n    if (data.hidden) {\r\n      style += \"display: none;\";\r\n    } else {\r\n      data.css[\"border-\" + v[0] + \"-width\"] = 0;\r\n      data.css[\"border-\" + h[0] + \"-width\"] = 0;\r\n      data.css[\"border-\" + v[1] + \"-width\"] = border_h;\r\n      data.css[\"border-\" + h[1] + \"-width\"] = border_w;\r\n      var current_rect = connection.getBoundingClientRect();\r\n      data.css.left = connection.offsetLeft + l - current_rect.left;\r\n      data.css.top = connection.offsetTop + t - current_rect.top;\r\n      data.css.width = width - border_w;\r\n      data.css.height = height - border_h;\r\n    }\r\n    var bc = data.borderClasses;\r\n    $(connection)\r\n      .removeClass(bc[v[0]])\r\n      .removeClass(bc[h[0]])\r\n      .addClass(bc[v[1]])\r\n      .addClass(bc[h[1]])\r\n      .attr(\"style\", style)\r\n      .css(data.css);\r\n  };\r\n\r\n  var processConnections = function (method, elements) {\r\n    return elements.each(function () {\r\n      var connections = $.data(this, \"connections\");\r\n      if (connections instanceof Array) {\r\n        for (var i = 0, len = connections.length; i < len; i++) {\r\n          method(connections[i]);\r\n        }\r\n      }\r\n    });\r\n  };\r\n})(jQuery);\r\n"],"names":[],"version":3,"file":"index.7dfc5c48.js.map","sourceRoot":"/__parcel_source_root/"}